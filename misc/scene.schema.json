{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Generic 3D Scene Schema",
  "description": "A schema for defining 3D scenes with objects, meshes, materials, and lights.",
  "type": "object",
  "properties": {
    "scene": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "description": "The name of the scene."
        },
        "objects": {
          "type": "array",
          "description": "List of objects in the scene.",
          "items": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string",
                "description": "The name of the object."
              },
              "mesh": {
                "type": "object",
                "description": "Mesh data for the object.",
                "oneOf": [
                  {
                    "description": "External mesh file.",
                    "properties": {
                      "path": {
                        "type": "string",
                        "description": "Path to the external mesh file."
                      }
                    },
                    "required": [
                      "path"
                    ],
                    "additionalProperties": false
                  },
                  {
                    "description": "Inline mesh data.",
                    "properties": {
                      "vertices": {
                        "type": "array",
                        "description": "List of vertex positions.",
                        "items": {
                          "type": "array",
                          "description": "A vertex position as [x, y, z].",
                          "items": {
                            "type": "number"
                          },
                          "minItems": 3,
                          "maxItems": 3
                        },
                        "minItems": 1
                      },
                      "normals": {
                        "type": "array",
                        "description": "List of vertex normals.",
                        "items": {
                          "type": "array",
                          "description": "A normal vector as [x, y, z].",
                          "items": {
                            "type": "number"
                          },
                          "minItems": 3,
                          "maxItems": 3
                        },
                        "minItems": 1
                      },
                      "indices": {
                        "type": "array",
                        "description": "List of indices for mesh triangles.",
                        "items": {
                          "type": "integer",
                          "minimum": 0
                        },
                        "minItems": 3
                      }
                    },
                    "required": [
                      "vertices",
                      "indices"
                    ],
                    "additionalProperties": false
                  }
                ]
              },
              "transform": {
                "type": "object",
                "description": "Transformation data for the object.",
                "properties": {
                  "position": {
                    "type": "array",
                    "description": "Position of the object [x, y, z].",
                    "items": {
                      "type": "number"
                    },
                    "minItems": 3,
                    "maxItems": 3
                  },
                  "scale": {
                    "type": "array",
                    "description": "Scale of the object [x, y, z].",
                    "items": {
                      "type": "number"
                    },
                    "minItems": 3,
                    "maxItems": 3,
                    "default": [
                      1,
                      1,
                      1
                    ]
                  },
                  "rotation": {
                    "type": "array",
                    "description": "Rotation of the object in degrees [pitch, yaw, roll].",
                    "items": {
                      "type": "number"
                    },
                    "minItems": 3,
                    "maxItems": 3,
                    "default": [
                      0,
                      0,
                      0
                    ]
                  }
                },
                "required": [
                  "position"
                ],
                "additionalProperties": false
              },
              "material": {
                "type": "object",
                "description": "Material properties of the object.",
                "properties": {
                  "albedo": {
                    "type": "array",
                    "description": "Albedo color [r, g, b].",
                    "items": {
                      "type": "number"
                    },
                    "minItems": 3,
                    "maxItems": 3,
                    "default": [
                      1.0,
                      1.0,
                      1.0
                    ]
                  },
                  "metallic": {
                    "type": "number",
                    "description": "Metallic factor (0.0 - 1.0).",
                    "minimum": 0.0,
                    "maximum": 1.0,
                    "default": 0.0
                  },
                  "roughness": {
                    "type": "number",
                    "description": "Roughness factor (0.0 - 1.0).",
                    "minimum": 0.0,
                    "maximum": 1.0,
                    "default": 0.5
                  },
                  "ao": {
                    "type": "number",
                    "description": "Ambient occlusion factor (0.0 - 1.0).",
                    "minimum": 0.0,
                    "maximum": 1.0,
                    "default": 1.0
                  },
                  "emissive": {
                    "type": "array",
                    "description": "Emissive color [r, g, b].",
                    "items": {
                      "type": "number"
                    },
                    "minItems": 3,
                    "maxItems": 3,
                    "default": [
                      0.0,
                      0.0,
                      0.0
                    ]
                  }
                },
                "required": [
                  "albedo",
                  "metallic",
                  "roughness",
                  "ao"
                ],
                "additionalProperties": false
              }
            },
            "required": [
              "name",
              "mesh",
              "transform",
              "material"
            ],
            "additionalProperties": false
          }
        },
        "lights": {
          "type": "array",
          "description": "List of lights in the scene.",
          "items": {
            "type": "object",
            "properties": {
              "type": {
                "type": "string",
                "description": "Type of the light.",
                "enum": [
                  "point",
                  "directional",
                  "spot",
                  "area"
                ]
              },
              "position": {
                "type": "array",
                "description": "Position of the light [x, y, z].",
                "items": {
                  "type": "number"
                },
                "minItems": 3,
                "maxItems": 3
              },
              "direction": {
                "type": "array",
                "description": "Direction of the light [x, y, z].",
                "items": {
                  "type": "number"
                },
                "minItems": 3,
                "maxItems": 3
              },
              "intensity": {
                "type": "array",
                "description": "Intensity/color of the light [r, g, b].",
                "items": {
                  "type": "number"
                },
                "minItems": 3,
                "maxItems": 3
              },
              "angle": {
                "type": "number",
                "description": "Cone angle for spotlights in degrees.",
                "minimum": 0.0,
                "maximum": 90.0
              },
              "size": {
                "type": "number",
                "description": "Size of area lights."
              }
            },
            "required": [
              "type",
              "intensity"
            ],
            "oneOf": [
              {
                "properties": {
                  "type": {
                    "enum": [
                      "point"
                    ]
                  },
                  "position": {
                    "type": "array",
                    "minItems": 3,
                    "maxItems": 3
                  }
                },
                "required": [
                  "position"
                ]
              },
              {
                "properties": {
                  "type": {
                    "enum": [
                      "directional"
                    ]
                  },
                  "direction": {
                    "type": "array",
                    "minItems": 3,
                    "maxItems": 3
                  }
                },
                "required": [
                  "direction"
                ]
              },
              {
                "properties": {
                  "type": {
                    "enum": [
                      "spot"
                    ]
                  },
                  "position": {
                    "type": "array",
                    "minItems": 3,
                    "maxItems": 3
                  },
                  "direction": {
                    "type": "array",
                    "minItems": 3,
                    "maxItems": 3
                  },
                  "angle": {
                    "type": "number"
                  }
                },
                "required": [
                  "position",
                  "direction",
                  "angle"
                ]
              },
              {
                "properties": {
                  "type": {
                    "enum": [
                      "area"
                    ]
                  },
                  "position": {
                    "type": "array",
                    "minItems": 3,
                    "maxItems": 3
                  },
                  "size": {
                    "type": "number"
                  }
                },
                "required": [
                  "position",
                  "size"
                ]
              }
            ],
            "additionalProperties": false
          }
        },
        "camera": {
          "type": "object",
          "description": "Camera settings for the scene.",
          "properties": {
            "position": {
              "type": "array",
              "description": "Position of the camera [x, y, z].",
              "items": {
                "type": "number"
              },
              "minItems": 3,
              "maxItems": 3
            },
            "target": {
              "type": "array",
              "description": "Look-at target point [x, y, z].",
              "items": {
                "type": "number"
              },
              "minItems": 3,
              "maxItems": 3
            },
            "fov": {
              "type": "number",
              "description": "Field of view in degrees.",
              "minimum": 1.0,
              "maximum": 179.0,
              "default": 60.0
            },
            "near_clip": {
              "type": "number",
              "description": "Near clipping plane distance.",
              "minimum": 0.1,
              "default": 0.1
            },
            "far_clip": {
              "type": "number",
              "description": "Far clipping plane distance.",
              "minimum": 0.1,
              "default": 1000.0
            }
          },
          "required": [
            "position",
            "target"
          ],
          "additionalProperties": false
        }
      },
      "required": [
        "name",
        "objects",
        "lights"
      ],
      "additionalProperties": false
    }
  },
  "required": [
    "scene"
  ],
  "additionalProperties": false
}